{{define "title"}}{{.Doc.Title}}{{end}}
{{template "base" .}}

{{define "main"}}
<div class="docs-container">
  <aside class="docs-sidebar">
    <div class="docs-sidebar-header">
      <h2>{{t "docs.title"}}</h2>
    </div>
    <nav class="docs-nav">
      {{range .Doc.Sidebar}}
      {{if eq .Level 0}}
      <div class="docs-nav-section">
        <a href="{{localePath (print "/docs/" .Slug) $.Lang}}" class="docs-nav-link{{if eq .Slug $.Doc.CurrentSlug}} active{{end}}">
          {{.Title}}
        </a>
      </div>
      {{else if eq .Level 1}}
      <div class="docs-nav-item">
        <a href="{{localePath (print "/docs/" .Slug) $.Lang}}" class="docs-nav-link{{if eq .Slug $.Doc.CurrentSlug}} active{{end}}">
          {{.Title}}
        </a>
      </div>
      {{end}}
      {{end}}
    </nav>
  </aside>

  <main class="docs-main">
    <div class="docs-content">
      <div class="docs-markdown">
        {{safeHTML .Doc.Content}}
      </div>
    </div>
  </main>

  {{if .Doc.TOC}}
  <aside class="docs-toc">
    <h3>{{t "docs.on_this_page"}}</h3>
    <ul class="docs-toc-list">
      {{range .Doc.TOC}}
      <li>
        <a href="#{{.ID}}" class="docs-toc-link">{{.Title}}</a>
      </li>
      {{end}}
    </ul>
  </aside>
  {{end}}
</div>

{{if .Doc.TOC}}
<script>
  // Smooth scroll for TOC links
  document.querySelectorAll('.docs-toc-link').forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ behavior: 'smooth' });
      }
    });
  });
</script>
{{end}}
{{end}}
